---
layout: post
title: Structuring Grails Projects
categories:
- grails
- plugins
- structuring
tags: []
status: publish
type: post
published: true
meta:
  _edit_lock: '1294152267'
  _flattr_post_language: ''
  _flattr_post_category: ''
  _flattr_post_hidden: ''
  _flattr_btn_disabled: ''
  blogger_blog: grails-inside.blogspot.com
  blogger_author: Andre Steingress
  blogger_d263388631120bb7ee0fc300fe57c4e6_permalink: '7497130564152380296'
  reddit: s:55:"a:2:{s:5:"count";s:1:"0";s:4:"time";s:10:"1293720038";}";
---
<b>A Plain Project</b><br /><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">Creating a Grails project is damn easy. Just run</span><br /><br /><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">grails create-app <br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">and Grails will create the initial project structure with the </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">grails-app</span><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"> folder. The </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">grails-app</span><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"> folder indeed is not just a simple folder but resembles the "convention over configuration" approach - meaning that each folder within it has a predefined meaning to the grails web application framework.</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">So far so good. But there are times when you are working on applications that go beyond the simple CRUD application style - some call them "enterprise applications". I guess there is no unique definition of what it really means for an application to be an "enterprise application", but there is at least one thing you as a software developer will have to come up with: structuring your application into several components.</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">Grails indeed has a neat mechanism that supports structuring your applications into several components: plugins.</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><b>The Plugin Concept</b></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">You might already know that there are hundreds of Grails plugins available - just take a look at <a href="http://grails.org/plugins">http://grails.org/plugins</a>. Even we know plugins of being an integration gateway to other frameworks such as Compass, Spring WebFlow, etc. they can be seen as a great mechanism to create independent components within your application too.&nbsp;</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">Let's assume i wanted a component which encapsulates and holds my application's business domain. In my project's folder I already created the main project by running&nbsp;</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">grails create-app GrailsEnterpriseApplication</span><br /><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">In order to create a separate component for my domain model, i would create a new plugin with</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">grails create-plugin GrailsEnterpriseDomain</span><br /><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">After executing these steps, the overall project's structure will look like this (i.e. in IntelliJ)</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><div class="separator" style="clear:both;text-align:center;"><a href="http://andresteingress.files.wordpress.com/2010/03/test.png" style="margin-left:1em;margin-right:1em;"><img border="0" height="243" src="http://andresteingress.files.wordpress.com/2010/03/test.png?w=300" width="640" /></a></div><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><span class="Apple-style-span" style="font-size:small;"><i>Hint: just ignore the two tomcat plugin projects, Grails 1.2.1 defines dependencies on it when creating apps and plugins.</i>&nbsp;</span></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">Since every Grails plugin in fact is a Grails application we can use all the creation and generation commands available in Grails from within that project. For example, running</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">grails create-domain-class org.ast.User</span><br /><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">on the GrailsEnterpriseDomain project will create a new domain class User and the according unit tests in our application's domain plugin. This means that it's possible for another group of developers to work independently on that component, without any restrictions on testing, creating artifacts and so forth.</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">So far we have not defined a reference between the main project and the plugin. In Grails 1.2.1 this can be done with an entry in the application.properties file in the main project:</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">plugins.grails-enterprise-domain=0.1</span><br /><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">This line in fact means that our </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">GrailsEnterpriseApplication</span><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"> depends on version 0.1 (the initial version) of our </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">GrailsEnterpriseDomain</span><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"> plugin.</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">The last step for being able to reference our custom plugin at runtime is the execution of the&nbsp;</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">grails package-plugin</span><br /><span
class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">command on the GrailsEnterpriseDomain project. This command create a zip archive of your plugin but more importantely a </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">plugin.xml</span><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"> file which later on is used by the main application on bootstrap, for loading and resolving possible dependencies of our domain plugin. So if our domain plugin would depend on other plugins, Grails would resolve those dependencies on application startup.</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">There are several commands and configuration settings to define plugin repositories and push plugins to them, but as it is the case here we just want to use our domain plugin without packaging and deploying it, as this is the case when the initial development work is done. Luckily there is a configuration setting in Grails 1.2.1's </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">BuildConfig.groovy </span><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">which allows the specification of local unpackaged plugins:</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">grails.plugin.location.'grails-enterprise-domain' = "../GrailsEnterpriseDomain"</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">When adding this line to the GrailsEnterpriseApplication's </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">B</span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">uildConfig.groovy</span><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">, Grails on startup instead of using plugin repositories makes a local file system lookup to load the </span><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">grails-enterprise-domain </span><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">plugin.</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">As a consequence running i.e.&nbsp;</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:'Courier New', Courier, monospace;">grails generate-controller org.ast.User</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">in the GrailsEnterpriseApplication project (!) automatically will reference the User class in your domain plugin. Meaning that separating the business model from the MVC part of your application can be done easily.</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><b>Summary</b></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">Of course, the example just showed a very simple use-case but I think you got the idea. Through Grail's plugin mechanism it is possible to create structured applications with explicit dependencies/automatic dependency resolution and even with revision management included.</span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">[0] Grails Plugin Portal - <a href="http://grails.org/plugins">http://grails.org/plugins</a></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;">[1] Grails Plugins Introduction -&nbsp;<span class="Apple-style-span" style="font-family:Times;"><a href="http://grails.org/doc/latest/guide/12.%20Plug-ins.html">http://grails.org/doc/latest/guide/12.%20Plug-ins.html</a></span></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span><br /><span class="Apple-style-span" style="font-family:Times, 'Times New Roman', serif;"><br /></span>
